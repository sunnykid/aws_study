## Table of Contents
- [Table of Contents](#table-of-contents)
- [Custom Parameter Group ìƒì„±](#custom-parameter-group-ìƒì„±)
  - [1. RDS, Aurora ìƒì„± í›„ ìì£¼ ì„¤ì •í•˜ê²Œ ë˜ëŠ” Parameter Group ì„¤ì • (PostgreSQL ê¸°ì¤€)](#1-rds-aurora-ìƒì„±-í›„-ìì£¼-ì„¤ì •í•˜ê²Œ-ë˜ëŠ”-parameter-group-ì„¤ì •-postgresql-ê¸°ì¤€)
  - [2. Custom Parameter Group ì´ìš© timezone ì„¤ì •](#2-custom-parameter-group-ì´ìš©-timezone-ì„¤ì •)
    - [2.1 Parameter Group ìƒì„±](#21-parameter-group-ìƒì„±)
    - [2.2 Parameter ê°’ ìˆ˜ì •](#22-parameter-ê°’-ìˆ˜ì •)
    - [2.3 Parameter Group ì ìš©](#23-parameter-group-ì ìš©)
- [Read Replica í…ŒìŠ¤íŠ¸](#read-replica-í…ŒìŠ¤íŠ¸)
  - [1. Read Replica ìƒì„±](#1-read-replica-ìƒì„±)
  - [2. Writer Instance ì ‘ì†](#2-writer-instance-ì ‘ì†)
    - [2.1 Aurora ì ‘ì† ì •ë³´ í™•ì¸](#21-aurora-ì ‘ì†-ì •ë³´-í™•ì¸)
    - [2.2 Aurora ì ‘ì†](#22-aurora-ì ‘ì†)
  - [3. Parameter Group ì„¤ì • ì ìš© ìƒíƒœ í™•ì¸](#3-parameter-group-ì„¤ì •-ì ìš©-ìƒíƒœ-í™•ì¸)
  - [4. TESTë¥¼ ìœ„í•œ Sample TABLE ìƒì„±](#4-testë¥¼-ìœ„í•œ-sample-table-ìƒì„±)
  - [3. Reader Instance ì ‘ì†](#3-reader-instance-ì ‘ì†)
    - [3.1 Aurora ì ‘ì† ì •ë³´ í™•ì¸](#31-aurora-ì ‘ì†-ì •ë³´-í™•ì¸)
    - [3.2 Aurora ì ‘ì†](#32-aurora-ì ‘ì†)
  - [4. Writer Instanceì—ì„œ Sample ë°ì´í„° ì…ë ¥](#4-writer-instanceì—ì„œ-sample-ë°ì´í„°-ì…ë ¥)

## Custom Parameter Group ìƒì„±

RDS DB ì—”ì§„ì˜ ì„¤ì • ê°’(Parameter)ë¥¼ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥

> ğŸ’¡ **Default Parameter Group vs Custom Parameter Group**
> - **Default Parameter Group**: RDSì—ì„œ ê¸°ë³¸ ì œê³µí•˜ë©° ìˆ˜ì • ë¶ˆê°€  
> - **Custom Parameter Group**: ì‚¬ìš©ìê°€ ìƒì„±í•˜ê³  ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥  

> ğŸ’¡ **Parameter Classification**
> - **Dynamic Parameters**: ë³€ê²½ ì‚¬í•­ ì¦‰ì‹œ ì ìš©  
> - **Static Parameters**: ë³€ê²½ ì‚¬í•­ì€ RDS ì¸ìŠ¤í„´ìŠ¤ ì¬ë¶€íŒ… í•„ìš” (Custom Parameter Groupì˜ ëŒ€ë¶€ë¶„ì€ Static 

> ğŸ’¡ **Parameter Type** 
> - **DB Parameters Group**: ë‹¨ì¼ Aurora ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì„¤ì • ê´€ë¦¬  
> - **Cluster Parameters Group**: Aurora í´ëŸ¬ìŠ¤ì—ì„œ ì†í•œ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ì „ì—­ìœ¼ë¡œ ì ìš©ë˜ëŠ” ì„¤ì • ê´€ë¦¬

### 1. RDS, Aurora ìƒì„± í›„ ìì£¼ ì„¤ì •í•˜ê²Œ ë˜ëŠ” Parameter Group ì„¤ì • (PostgreSQL ê¸°ì¤€)

| Parameter Name                     | Default  |           Recommended            | Description                                                            |
| :--------------------------------- | :------: | :------------------------------: | :--------------------------------------------------------------------- |
| timezone                           |   UTC    |            Asia/Seoul            | ì„œë²„ì˜ ì‹œê°„ëŒ€ë¥¼ ì„œìš¸ ì‹œê°„(Asia/Seoul)ìœ¼ë¡œ ì„¤ì •                         |
| log_connections                    |    0     |                1                 | Connection ì—°ê²° ê¸°ë¡ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ì„¤ì •                              |
| log_temp_files                     |    0     |               1024               | ì„¤ì • ê°’(KB) ì´ìƒì˜ ì„ì‹œ íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” SQL ì¿¼ë¦¬ ê¸°ë¡                  |
| log_min_messages                   | warning  |              error               | ë¡œê·¸ì— ê¸°ë¡ë˜ëŠ” ë©”ì‹œì§€ ì¢…ë¥˜ë¥¼ error ë¡œê·¸ ë ˆë²¨ ì´ìƒìœ¼ë¡œ ì„¤ì •            |
| log_lock_waits                     |    0     |                1                 | ì§€ì • ì‹œê°„ ë™ì•ˆ ì ê¸´ êµì°© ìƒíƒœì˜ íŠ¸ëœì­ì…˜ ê°ì§€                          |
| log_statement                      |   none   |               ddl                | ë¡œê·¸ì— ë‚¨ê¸¸ SQL ëª…ë ¹ì˜ ìœ í˜•ì„ ì„¤ì • (DDL, MOD, ALL, NONE)               |
| log_min_duration_statement         |    -1    |             100 or 1             | ì§€ì • ì‹œê°„(ms) ì´ìƒ ì†Œìš”ëœ ì¿¼ë¦¬ ë¡œê¹…í•˜ì—¬ ëŠë¦° ì¿¼ë¦¬ ì¶”ì                  |
| log_autovacuum_min_duration        |    -1    |               1000               | ì§€ì • ì‹œê°„(ms) ì´ìƒ ì†Œìš”ëœ autovacuum ì‘ì—… ë¡œê¹…                         |
| rds.force_autovacuum_logging_level | disabled |               log                | autovacuum ë¡œê·¸ì˜ ë¡œê¹… ë ˆë²¨ ì„¤ì •                                       |
| auto_explain.log_min_duration      |    -1    |               1000               | ì§€ì • ì‹œê°„(ms) ì´ìƒì˜ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íšì„ ë¡œê¹…                             |
| shared_preload_libraries           |   none   | auto_explain, pg_stat_statements | ì‹¤í–‰ ê³„íš ë° ì„±ëŠ¥ í†µê³„ë¥¼ ë¡œê¹…í•˜ëŠ” ê¸°ëŠ¥ ì„¤ì •                            |
| log_error_verbosity                | default  |             verbose              | ì˜¤ë¥˜ ë¡œê·¸ì˜ ìƒì„¸ ìˆ˜ì¤€ì„ ì„¤ì • (terse, default, verbose)                 |
| rds.force_admin_logging_level      | disabled |               log                | ë§ˆìŠ¤í„° ì‚¬ìš©ìì˜ í™œë™ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (ë§ˆìŠ¤í„° ê´€ë¦¬ìê°€ ì‹¤í–‰í•œ ëª¨ë“  ì¿¼ë¦¬) |

### 2. Custom Parameter Group ì´ìš© timezone ì„¤ì •

#### 2.1 Parameter Group ìƒì„±

- **RDS ë©”ì¸ ì½˜ì†” í™”ë©´ â†’ `íŒŒë¼ë¯¸í„° ê·¸ë£¹` íƒ­ â†’ `íŒŒë¼ë¯¸í„° ê·¸ë£¹ ìƒì„±` ë²„íŠ¼ í´ë¦­**

  ![alt text](./img/create_parameter_group_01.png)

- ì•„ë˜ ëª…ì„¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ìƒì„± ì •ë³´ ì…ë ¥

  - íŒŒë¼ë¯¸í„° ê·¸ë£¹ ì´ë¦„: lab-edu-pg-postgresql

  - ì—”ì§„ ìœ í˜•: Aurora PostgreSQL

  - íŒŒë¼ë¯¸í„° ê·¸ë£¹ íŒ¨ë°€ë¦¬: aurora-postgresql15

  - ìœ í˜•: DB Cluster Parameter Group

  ![alt text](./img/create_parameter_group_02.png)

#### 2.2 Parameter ê°’ ìˆ˜ì •

- `íŒŒë¼ë¯¸í„° ê·¸ë£¹` íƒ­ì—ì„œ ìƒì„±í•œ íŒŒë¼ë¯¸í„° ê·¸ë£¹ì˜ ì´ë¦„ `lab-edu-pg-postgresql` í´ë¦­

- `í¸ì§‘` ë²„íŠ¼ í´ë¦­

  ![alt text](./img/create_parameter_group_03.png)

- ê²€ìƒ‰ ì°½ì— `timezone` ì…ë ¥ â†’ ê°’ ì…ë ¥ ì°½ì— `Asia/Seoul` ì…ë ¥ â†’ `ë³€ê²½ ì‚¬í•­ ì €ì¥` ë²„íŠ¼ í´ë¦­

  ![alt text](./img/create_parameter_group_04.png)

#### 2.3 Parameter Group ì ìš©

- **RDS ë©”ì¸ ì½˜ì†” í™”ë©´ â†’ `ë°ì´í„° ë² ì´ìŠ¤` íƒ­ â†’ `lab-edu-rds-aurora` ì„ íƒ â†’ `ìˆ˜ì •` í´ë¦­**

  ![alt text](./img/create_parameter_group_05.png)

- `ì„¤ì •` í•„ë“œ â†’ `ë§ˆìŠ¤í„° ì•”í˜¸`, `ë§ˆìŠ¤í„° ì•”í˜¸ í™•ì¸` í•­ëª©ì— `PASSWORD` ì…ë ¥

  ![alt text](./img/create_parameter_group_06.png)

- `ì¶”ê°€ êµ¬ì„±` í•„ë“œ â†’ `DB í´ëŸ¬ìŠ¤í„° íŒŒë¼ë¯¸í„° ê·¸ë£¹`ì—ì„œ `lab-edu-pg-postgresql` ì„ íƒ

  ![alt text](./img/create_parameter_group_07.png)

- `ê³„ì†` ë²„íŠ¼ í´ë¦­ â†’ `ìˆ˜ì • ì˜ˆì•½` í•„ë“œì—ì„œ `ì¦‰ì‹œ ì ìš©` ì ìš© í™•ì¸ â†’ `í´ëŸ¬ìŠ¤í„° ìˆ˜ì •` ë²„íŠ¼ í´ë¦­

  ![alt text](./img/create_parameter_group_08.png)

<br>



## Read Replica í…ŒìŠ¤íŠ¸

### 1. Read Replica ìƒì„±

- **RDS ë©”ì¸ ì½˜ì†” í™”ë©´ â†’ `ë°ì´í„° ë² ì´ìŠ¤` íƒ­ â†’ `lab-edu-rds-aurora` ì„ íƒ â†’ `ì‘ì—…` â†’ `ì½ê¸° ì¶”ê°€` í´ë¦­**

  ![alt text](./img/read_replica_01.png)
  
- `ì„¤ì •` í•„ë“œ â†’ `DB ì¸ìŠ¤í„´ìŠ¤ ì‹ë³„ì` í•­ëª©ì— `lab-edu-rds-aurora` ì…ë ¥

  ![alt text](./img/read_replica_02.png)

- `ì½ê¸° ì¶”ê°€` ë²„íŠ¼ í´ë¦­

### 2. Writer Instance ì ‘ì†

#### 2.1 Aurora ì ‘ì† ì •ë³´ í™•ì¸

- **RDS ë©”ì¸ ì½˜ì†” í™”ë©´ â†’ `ë°ì´í„°ë² ì´ìŠ¤` íƒ­ â†’ `lab-edu-rds-aurora` ë°ì´í„° ë² ì´ìŠ¤ í´ë¦­**

- ì—”ë“œí¬ì¸íŠ¸ íƒ­ì˜ `ë¼ì´í„°` ìœ í˜•ì˜ ì—”ë“œí¬ì¸íŠ¸ ì´ë¦„ ë³µì‚¬ 

  ![alt text](./img/access_writer_instance_01.png)  

#### 2.2 Aurora ì ‘ì†

- VS Code IDE Terminal ì ‘ì† â†’ PostgreSQL ì ‘ì†

  ```bash
  psql -U user -d trip_advisor -h {RDS_AURORA_WRITER_ENDPOINT}
  Password for user user: {RDS_AURORA_PASSWORD}
  ```

### 3. Parameter Group ì„¤ì • ì ìš© ìƒíƒœ í™•ì¸

- PostgreSQL CLI í™”ë©´ì—ì„œ Command ì‹¤í–‰

    ```sql
    postgres=> SHOW timezone;
      TimeZone  
    ------------
     Asia/Seoul
    ```

### 4. TESTë¥¼ ìœ„í•œ Sample TABLE ìƒì„±

- VS Code IDE â†’ ì¢Œì¸¡ í´ë” íŒ¨ë„ì—ì„œ `support_files/sql_query/create_destination_teable.sql` íŒŒì¼ ì—´ê¸°

- `í…Œì´ë¸” ìƒì„±` SQL Query ëª…ë ¹ë¬¸ ë³µì‚¬

  ```sql
  CREATE TABLE attractions (
      id SERIAL PRIMARY KEY,
      name VARCHAR(255) NOT NULL,
      location VARCHAR(255) NOT NULL,
      average_rating VARCHAR(10),
      photo_url VARCHAR(255)
  );
  ```

- PostgreSQL CLI í™”ë©´ì—ì„œ Command ì‹¤í–‰

  ```sql
  trip_advisor=> CREATE TABLE attractions (
      id SERIAL PRIMARY KEY,
      name VARCHAR(255) NOT NULL,
      location VARCHAR(255) NOT NULL,
      average_rating VARCHAR(10),
      photo_url VARCHAR(255)
  );
  CREATE TABLE
  ```

- ìƒì„±ëœ í…Œì´ë¸” ëª©ë¡ ì¡°íšŒ ëª…ë ¹ì–´ 

  ```sql
  trip_advisor=> \dt
  \          List of relations
  Schema |    Name     | Type  | Owner 
  --------+-------------+-------+-------
  public | attractions | table | user
  (1 row)
  ```

### 3. Reader Instance ì ‘ì†

#### 3.1 Aurora ì ‘ì† ì •ë³´ í™•ì¸

- **RDS ë©”ì¸ ì½˜ì†” í™”ë©´ â†’ `ë°ì´í„°ë² ì´ìŠ¤` íƒ­ â†’ `lab-edu-rds-aurora` ë°ì´í„° ë² ì´ìŠ¤ í´ë¦­**

- ì—”ë“œí¬ì¸íŠ¸ íƒ­ì˜ `ë¦¬ë”` ìœ í˜•ì˜ ì—”ë“œí¬ì¸íŠ¸ ì´ë¦„ ë³µì‚¬

  ![alt text](./img/access_reader_instance_01.png)

#### 3.2 Aurora ì ‘ì†

- VS Code IDE Terminal ì ‘ì† â†’ Terminal í™”ë©´ ë¶„í•  

  ![alt text](./img/access_reader_instance_02.png)

- ë‘ ë²ˆì§¸ Terminal í™”ë©´ì—ì„œ READER ì¸ìŠ¤í„´ìŠ¤ì˜ DB TABLE ëª¨ë‹ˆí„°ë§ Shell Script ì‹¤í–‰

  ```bash
  while true; do
    PGPASSWORD="qwer1234" psql -h {RDS_AURORA_READER_ENDPOINT} \
        -U user \
        -d trip_advisor \
        -c "select * from attractions;";
    sleep 10;
  done
  ```

  ![alt text](./img/access_reader_instance_03.png)

### 4. Writer Instanceì—ì„œ Sample ë°ì´í„° ì…ë ¥

- VS Code IDE â†’ ì¢Œì¸¡ í´ë” íŒ¨ë„ì—ì„œ `support_files/sql_query/create_destination_teable.sql` íŒŒì¼ ì—´ê¸°

- `í…ŒìŠ¤íŠ¸ ë°ì´í„° ì…ë ¥` SQL Query ëª…ë ¹ë¬¸ ë³µì‚¬

  ```sql
  INSERT INTO attractions (name, location, average_rating, photo_url) VALUES 
  ('Eiffel Tower', 'Paris, France', 4.7, 'https://lh5.googleusercontent.com/p/AF1QipOnJHzIOu1VUvkTX0GKjmqK-NdgXWJEUa8m2YPd=w540-h312-n-k-no'),
  ('Great Wall of China', 'Beijing, China', 4.8, 'https://encrypted-tbn1.gstatic.com/licensed-image?q=tbn:ANd9GcSNsVSfi_LRcKaaxzjCs-Aq1_9YS7WAN7d4rrC_Oecn5n0D3Jkm8klHCLU6Eo9cZNRctYeEuTL_3jL_xUATWJOuSJm62z54'),
  ('Statue of Liberty', 'New York, USA', 4.6, 'https://encrypted-tbn2.gstatic.com/licensed-image?q=tbn:ANd9GcQeve9KWo7zk7gXpRgaBDhfeCklifCZqaLWPXXJgKJJCFpYSp7kauVOlyt1nmNLi9UqT9P4SiUFBLihf5omTv-bdR8LLTWv'),
  ('Taj Mahal', 'Agra, India', 4.9, 'https://lh3.googleusercontent.com/p/AF1QipOIwFX7pMJXtOZ5zEkes4rLws69dgeTYas5C1p4=s680-w680-h510'),
  ('Colosseum', 'Rome, Italy', 4.8, 'https://lh3.googleusercontent.com/p/AF1QipNtY2FidGEO7yj8kqm-h-ixL3H27DmKOD8dAwvK=s1360-w1360-h1020'),
  ('Machu Picchu', 'Cusco Region, Peru', 4.9, 'https://lh3.googleusercontent.com/p/AF1QipOHVkYSLcE9rOozPl9UPtEz4ga0IkMVD5_4J-NM=s1360-w1360-h1020'),
  ('Gyeongbokgung Palace', 'Seoul, South Korea', 4.7, 'https://lh3.googleusercontent.com/p/AF1QipPe2q2PPeip1zVjV6UI4FHCkdFxIglodID7c0a3=s1360-w1360-h1020'),
  ('Sydney Opera House', 'Sydney, Australia', 4.7, 'https://lh3.googleusercontent.com/p/AF1QipMHftgSCBlvyjxYphi4gLqDC_62WWvZvyy1EBuh=s1360-w1360-h1020'),
  ('Waikiki Beach', 'Honolulu, Hawaii', 4.5, 'https://www.vmcdn.ca/f/files/glaciermedia/import/lmp-all/1621129-hawaiian-islands-jpg-w-960.jpg');
  ```

- VS Code Terminal ì¢Œì¸¡ í™”ë©´ì˜ Writer Instanceì—ì„œ ë³µì‚¬í•œ ëª…ë ¹ì–´ ì‹¤í–‰ 

  > 1 ~ 10ì´ˆ ì •ë„ì˜ ì‹œê°„ì´ ì§€ë‚˜ë©´, ë°ì´í„°ê°€ ë³µì œë˜ì–´ ìš°ì¸¡ Terminal í™”ë©´ì—ì„œ ì¡°íšŒë˜ëŠ” ë°ì´í„° í™•ì¸

  ![alt text](./img/access_reader_instance_04.png)





























<!-- ### 6. PostgreSQL Database, User ìƒì„± ë° ê¶Œí•œ í• ë‹¹

- Cloud9 IDE ì ‘ì† â†’ SQL Query Sample íŒŒì¼ ì—´ê¸° (support_files/sql_query/initial_settings_db.sql) â†’ ë‚´ìš© ë³µì‚¬ â†’ ë¶™ì—¬ë„£ê¸°

    ```sql
    create database trip_advisor;
    create user "user" with password 'qwer1234';
    grant all privileges on database trip_advisor to "user";
    alter database trip_advisor owner to "user";
    ```

- 'user' ê³„ì • í™œìš© 'trip_advisor' ì ‘ì† í…ŒìŠ¤íŠ¸

    ```bash
    psql â€“U user â€“d trip_advisor â€“h {RDS_AURORA_ENDPOINT}   # ì•ì—ì„œ ë©”ëª¨ì¥ì— ì €ì¥í•œ RDS Aurora ì—”ë“œí¬ì¸ ì •ë³´ ì…ë ¥
    Password for user user: {RDS_AURORA_PASSWORD}       # ìƒì„±ê³¼ì •ì— ì…ë ¥í–ˆë˜ íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥
    ``` -->